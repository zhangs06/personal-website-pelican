<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Creating Geospatial PDFs with GDAL Tools - Spatial Thoughts</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://www.spatialthoughts.com/blog/gis/geopdf-gdal/">

        <meta name="author" content="Ujaval Gandhi" />
        <meta name="description" content="GeoPDF is a unique data format that brings the portability of PDF to geospatial data. A GeoPDF document can present raster and vector data and preserve the georeference information. This can be a useful format for non-GIS folks to consume GIS data without needing GIS-software. While GeoPDF is a proprietary ..." />

        <meta property="og:site_name" content="Spatial Thoughts" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Creating Geospatial PDFs with GDAL Tools"/>
        <meta property="og:url" content="http://www.spatialthoughts.com/blog/gis/geopdf-gdal/"/>
        <meta property="og:description" content="GeoPDF is a unique data format that brings the portability of PDF to geospatial data. A GeoPDF document can present raster and vector data and preserve the georeference information. This can be a useful format for non-GIS folks to consume GIS data without needing GIS-software. While GeoPDF is a proprietary ..."/>
        <meta property="article:published_time" content="2015-10-27" />
            <meta property="article:section" content="gis" />
            <meta property="article:author" content="Ujaval Gandhi" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://www.spatialthoughts.com/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://www.spatialthoughts.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://www.spatialthoughts.com/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="http://www.spatialthoughts.com/theme/css/style.css" type="text/css"/>

        <link href="http://www.spatialthoughts.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Spatial Thoughts ATOM Feed"/>



        <link href="http://www.spatialthoughts.com/feeds/gis.atom.xml" type="application/atom+xml" rel="alternate"
              title="Spatial Thoughts gis ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://www.spatialthoughts.com/" class="navbar-brand">
Spatial Thoughts            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/qgis">QGIS</a></li>
                    <li><a href="/opendatakit">OpenDataKit</a></li>
                    <li><a href="/websites">Websites</a></li>
                    <li><a href="/blog">Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://www.spatialthoughts.com/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://www.spatialthoughts.com/blog/gis/geopdf-gdal/"
                       rel="bookmark"
                       title="Permalink to Creating Geospatial PDFs with GDAL Tools">
                        Creating Geospatial PDFs with GDAL Tools
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-10-27T00:00:00+05:30"> Tue 27 October 2015</time>
    </span>





    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><a class="reference external" href="https://en.wikipedia.org/wiki/GeoPDF">GeoPDF</a> is a unique data format that
brings the portability of PDF to geospatial data. A GeoPDF document can present
raster and vector data and preserve the georeference information. This can be a
useful format for non-GIS folks to consume GIS data without needing
GIS-software. While GeoPDF is a proprietary format, we have a close alternative
in the open <a class="reference external" href="https://en.wikipedia.org/wiki/Geospatial_PDF">Geospatial PDF</a>
format. GDAL has added support for creating Geospatial PDF documents from
version 1.10 onwards. In this post, I will show how to create a GeoPDF document
containing multiple vector layers.</p>
<div class="section" id="get-the-tools">
<h2>Get the Tools</h2>
<div class="section" id="windows">
<h3>Windows</h3>
<p><a class="reference external" href="https://trac.osgeo.org/osgeo4w/">OsGeo4W</a> is the best way to install GDAL on
Windows. The default installation gives your GDAL tools with PDF format support. You
can use the GDAL tools via the OsGeo4W Shell included in the install.</p>
</div>
<div class="section" id="mac">
<h3>Mac</h3>
<p>KyngChaos providers a convenient <a class="reference external" href="http://www.kyngchaos.com/software/frameworks#gdal_complete">GDAL installer</a> for Mac. You
also need to install the additional <a class="reference external" href="http://www.kyngchaos.com/files/software/frameworks/GDAL-GeoPDF_Plugin-1.11.3-1.dmg">GeoPDF plugin</a>
to enable support for PDF format.</p>
<p>Once installed, add the path to GDAL library to your
<tt class="docutils literal">.bash_profile</tt> file to be able to use the commands easily from the terminal.
Launch a Terminal and type in the following commands.</p>
<div class="highlight"><pre><span></span>echo &#39;export PATH=/Library/Frameworks/GDAL.framework/Programs:$PATH&#39; &gt;&gt; ~/.bash_profile
source ~/.bash_profile
</pre></div>
</div>
<div class="section" id="linux">
<h3>Linux</h3>
<p>Installation instructions will vary with the distribution. On Ubuntu, you can
install the <tt class="docutils literal"><span class="pre">gdal-bin</span></tt> package.</p>
<div class="highlight"><pre><span></span>sudo apt-get install gdal-bin
</pre></div>
</div>
</div>
<div class="section" id="verify-gdal-install">
<h2>Verify GDAL Install</h2>
<p>If you already have GDAL installed, or just installed it, run the following
command in a terminal to verify that your GDAL installation is working and has
support for GeoPDF format.</p>
<div class="highlight"><pre><span></span>gdalinfo --formats | grep -i pdf
</pre></div>
<p>If you see Geospatial PDF printed in the output - you are all set. If you do
not get any output or get an error, your install is not correctly configured.</p>
<img alt="" class="align-center" src="/images/geopdf1.png" />
</div>
<div class="section" id="get-the-data">
<h2>Get the Data</h2>
<p>For this example, I chose to use <a class="reference external" href="https://mapzen.com/data/metro-extracts">OpenStreetMap Metro Extracts</a> from MapZen. Download the shapefiles
(OSM2PGSQL SHP format) for the city of your choice. I am using the extract for
Bangalore city in this example. Unzip the downloaded file to a folder on your
computer.</p>
</div>
<div class="section" id="procedure">
<h2>Procedure</h2>
<p>The process for creating a GeoPDF file from a bunch of shapefiles is the matter
of running a single <tt class="docutils literal">gdal_translate</tt> command. But we need to prepare the data
and figure out the correct command-line options. So follow along to understand
how you can arrive at the final command - or simply scroll to the end to see
the final command-line.</p>
<p>latuviitta.org has a <a class="reference external" href="http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf">comprehensive overview</a> of all the options available for
GeoPDF creation via GDAL. The follow steps are adapted and simplified version
of that guide.</p>
<ol class="arabic simple">
<li>First step is to create a <tt class="docutils literal">.vrt</tt> file that can hold all the vector layers
we want in the PDF. If you just need a single layer in the PDF, you can skip
creating the <tt class="docutils literal">.vrt</tt> file and directly reference the layer in place of the
VRT. Note the &lt;SrcSQL&gt; tag in the VRT file. This is for filtering out all
features where the 'name' field is empty. You can leave that out or modify
to suit your dataset. Name this file <tt class="docutils literal">osm.vrt</tt> and save it on the same
folder with your data.</li>
</ol>
<div class="highlight"><pre><span></span>&lt;OGRVRTDataSource&gt;
    &lt;OGRVRTLayer name=&quot;roads&quot;&gt;
        &lt;SrcDataSource&gt;bengaluru_india_osm_line.shp&lt;/SrcDataSource&gt;
        &lt;SrcLayer&gt;bengaluru_india_osm_line&lt;/SrcLayer&gt;
        &lt;SrcSQL dialect=&quot;sqlite&quot;&gt;SELECT name, highway, geometry from bengaluru_india_osm_line where name is not NULL&lt;/SrcSQL&gt;
        &lt;GeometryType&gt;wkbLineString&lt;/GeometryType&gt;
        &lt;LayerSRS&gt;WGS84&lt;/LayerSRS&gt;
    &lt;/OGRVRTLayer&gt;
    &lt;OGRVRTLayer name=&quot;pois&quot;&gt;
        &lt;SrcDataSource&gt;bengaluru_india_osm_point.shp&lt;/SrcDataSource&gt;
        &lt;SrcLayer&gt;bengaluru_india_osm_point&lt;/SrcLayer&gt;
        &lt;SrcSQL dialect=&quot;sqlite&quot;&gt;SELECT name, geometry from bengaluru_india_osm_point where name is not NULL&lt;/SrcSQL&gt;
        &lt;GeometryType&gt;wkbPoint&lt;/GeometryType&gt;
        &lt;LayerSRS&gt;WGS84&lt;/LayerSRS&gt;
    &lt;/OGRVRTLayer&gt;
&lt;/OGRVRTDataSource&gt;
</pre></div>
<ol class="arabic simple" start="2">
<li>GeoPDF is a raster format that can overlay
vectors on top. So we need a raster layer as the base. If you have some
satellite imagery or scanned raster for the area, you can use it as the
base layer, or we can create an empty raster for the extent of the vector
layer. <tt class="docutils literal">ogrtindex</tt> command creates a bounding box polygon from the given
input layers. <tt class="docutils literal">gdal_rasterize</tt> command then fills this polygon with the
given value and creates a raster. The <tt class="docutils literal"><span class="pre">-tr</span></tt> option specifies the pixel
resolution of the raster in degrees. You can tweak that to get the output
size you need. <tt class="docutils literal">cd</tt> to the directory where you have extracted the vector
layers and run the following commands.</li>
</ol>
<div class="highlight"><pre><span></span>cd Users\Ujaval\Downloads\bengaluru_india.osm2pgsql-shapefiles

ogrtindex -accept _different_schemas extent.shp osm.vrt

gdal_rasterize -burn 255 -ot Byte -tr 0.0001 0.0001 extent.shp bangalore.tif
</pre></div>
<img alt="" class="align-center" src="/images/geopdf2.png" />
<ol class="arabic simple" start="3">
<li>Now we can convert the empty <tt class="docutils literal">bangalore.tif</tt> raster to a PDF - overlaying
the vector layers from the <tt class="docutils literal">osm.vrt</tt> file.</li>
</ol>
<div class="highlight"><pre><span></span>gdal_translate -of PDF -a_srs EPSG:4326 bangalore.tif bangalore.pdf -co OGR_DATASOURCE=osm.vrt -co OGR_DISPLAY_FIELD=&quot;name&quot;
</pre></div>
<img alt="" class="align-center" src="/images/geopdf3.png" />
<ol class="arabic simple" start="4">
<li>Once the conversion finishes, you can open the resulting <tt class="docutils literal">bangalore.pdf</tt>
file in any PDF viewer. Opening it in Adobe Acrobat viewer, you can see the
map data layers. You can browse the features in the layer panel, search for
any attribute value and zoom/pan the map.</li>
</ol>
<img alt="" class="align-center" src="/images/geopdf4.png" />
<ol class="arabic simple" start="5">
<li>Another popular use of GeoPDF files is to use it as offline base maps using
programs such as <a class="reference external" href="http://www.avenza.com/pdf-maps">Avenza PDF Maps</a>.
Loading the <tt class="docutils literal">bangalore.pdf</tt> file on Avenza Maps on your mobile phone, you
can use the GPS to view your current location or trace a GPS route on top.
Search also works across layers in the PDF.</li>
</ol>
<img alt="" class="align-center" src="/images/geopdf5.png" />
<p>You can download the sample <a class="reference external" href="https://drive.google.com/open?id=0B0Xc7QoGul60eFRuTHVvUWRVZEE">bangalore.pdf</a> Geospatial
PDF format file for exploring the format yourself.</p>
</div>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'spatialthoughts'; // required: replace example with your forum shortname

                    var disqus_identifier = 'geopdf-gdal';
                var disqus_url = 'http://www.spatialthoughts.com/blog/gis/geopdf-gdal/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="http://twitter.com/spatialthoughts"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
                <li class="list-group-item"><a href="https://github.com/spatialthoughts"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                <li class="list-group-item"><a href="https://google.com/+UjavalGandhi"><i class="fa fa-google-plus-square fa-lg"></i> Google+</a></li>
              </ul>
            </li>

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="http://www.spatialthoughts.com/blog/conference/openaq-workshop-notes/">
                            OpenAQ Workshop Notes
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.spatialthoughts.com/blog/odk/odk-line-transact/">
                            Line Transact Surveys using OpenDataKit(ODK)
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.spatialthoughts.com/blog/gis/geopdf-gdal/">
                            Creating Geospatial PDFs with GDAL Tools
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.spatialthoughts.com/blog/gis/mapshaper-command-line/">
                            Geo Data Processing with Mapshaper
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.spatialthoughts.com/blog/gis/ogr-spatial-join/">
                            Spatial Joins on the Command Line
                        </a>
                    </li>
                </ul>
            </li>




    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://qgistutorials.com/" target="_blank">
                QGIS Tutorials and Tips
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.gisinindia.com/" target="_blank">
                GIS in India
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.gpsinindia.com/" target="_blank">
                GPS in India
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Ujaval Gandhi
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://www.spatialthoughts.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://www.spatialthoughts.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://www.spatialthoughts.com/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'spatialthoughts'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-690672-12', '');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->

</body>
</html>