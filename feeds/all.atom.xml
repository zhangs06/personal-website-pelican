<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Spatial Thoughts</title><link href="http://www.spatialthoughts.com/" rel="alternate"></link><link href="http://www.spatialthoughts.com/feeds/all.atom.xml" rel="self"></link><id>http://www.spatialthoughts.com/</id><updated>2015-10-21T00:00:00+05:30</updated><entry><title>GIS Data Processing with Mapshaper</title><link href="http://www.spatialthoughts.com/blog/gis/mapshaper-command-line/" rel="alternate"></link><updated>2015-10-21T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2015-10-21:blog/gis/mapshaper-command-line/</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://mapshaper.org/"&gt;Mapshaper&lt;/a&gt; is a powerful tool that is best known for
fast and easy simplification. Other tools for simplification - like QGIS or
ogr2ogr - do not preserve topology while simplifying.  This means you may get
sliver polygons or missing intersections. Mapshaper performs
topologically-aware simplification and gives you much more control on the
process.&lt;/p&gt;
&lt;p&gt;But Mapshaper is much more than a simplification tool. It is in active
development and has many more data processing and editing capabilities now. It
also has a command-line version of the tool which can be run from a terminal.
In this post, we will explore the command-line tool to carry out some complex
geoprocessing tasks.&lt;/p&gt;
&lt;div class="section" id="get-the-tools"&gt;
&lt;h2&gt;Get the Tools&lt;/h2&gt;
&lt;p&gt;Mapshaper is a &lt;a class="reference external" href="https://nodejs.org/en/"&gt;Node.js&lt;/a&gt; application. &lt;a class="reference external" href="https://nodejs.org/en/download/"&gt;Download&lt;/a&gt; and install Node.js for your platform. You
will need the Node Package Manager (NPM) to install mapshaper,  so make sure it
is enabled while going through the installer.&lt;/p&gt;
&lt;img alt="" class="align-center" src="/images/mapshaper1.png" /&gt;
&lt;p&gt;Once Node.js is installed, launch the Windows &lt;tt class="docutils literal"&gt;Command Prompt (cmd.exe)&lt;/tt&gt; and
run the following command to install mapshaper.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;npm install -g mapshaper
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/mapshaper2.png" /&gt;
&lt;/div&gt;
&lt;div class="section" id="get-the-data"&gt;
&lt;h2&gt;Get the Data&lt;/h2&gt;
&lt;p&gt;Review the data and problem statement from the &lt;a class="reference external" href="http://www.qgistutorials.com/en/docs/performing_table_joins.html"&gt;Performing Table Joins&lt;/a&gt;
tutorial. Download the Census Tracts shapefile &lt;tt class="docutils literal"&gt;tl_2013_06_tract.zip&lt;/tt&gt; and the
Population CSV &lt;tt class="docutils literal"&gt;ca_tracts_pop.csv&lt;/tt&gt;. Unzip the &lt;tt class="docutils literal"&gt;tl_2013_06_tract.zip&lt;/tt&gt; file
and extract it to a folder.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="procedure"&gt;
&lt;h2&gt;Procedure&lt;/h2&gt;
&lt;p&gt;Mapshaper command takes an input, an output and a sequence of commands to
execute. Each command is followed by options specific to that command. All
the commands and options are well documented at the &lt;a class="reference external" href="https://github.com/mbloch/mapshaper/wiki/Command-Reference"&gt;Mapshaper Wiki&lt;/a&gt;.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Let's start with simplification. We will take the census tracts shapefile
and simlpify it to reduce the number of verticies and the total size. The
command for simplification is &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-simplify&lt;/span&gt;&lt;/tt&gt;. You can supply a percentage
value as an option to specify how aggressiveness of the simplification.
Another useful option is &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;keep-shapes&lt;/span&gt;&lt;/tt&gt; which ensures that none of the
polygons from the input will get deleted. Run the following command. Make
sure you &lt;tt class="docutils literal"&gt;cd&lt;/tt&gt; to the directory where the data has been downloaded.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;The percentage value in the -simplify command can be a little misleading.
The value indicates how many verticies to keep and not how many to remove.
So a lower value would result in MORE simplification.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mapshaper -i tl_2013_06_tract\tl_2013_06_tract.shp -simplify 20% keep-shapes -o output.shp
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/mapshaper3.png" /&gt;
&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;Mapshaper can also do Table Joins. We can now join the population field
&lt;tt class="docutils literal"&gt;D001&lt;/tt&gt; from the &lt;tt class="docutils literal"&gt;ca_tracts_pop.csv&lt;/tt&gt; file. The join will match the fields
we specify as &lt;tt class="docutils literal"&gt;keys&lt;/tt&gt; and add it to the output file. For the join to work
correctly, we need to specify the field types in the CSV file. (Similar to
how a .csvt file is needed by QGIS). We can 'chain' the &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-join&lt;/span&gt;&lt;/tt&gt; command
after the &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-simplify&lt;/span&gt;&lt;/tt&gt; command to perform both the operation in a single
command.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mapshaper -i tl_2013_06_tract\tl_2013_06_tract.shp -simplify 20% keep-shapes -join ca_tracts_pop.csv keys=GEOID,GEO.id2 field-types GEO.id2:str,D001:num -o output.shp
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/mapshaper4.png" /&gt;
&lt;ol class="arabic simple" start="3"&gt;
&lt;li&gt;Mapshaper can also dissolve features. In my testing, Mapshaper's dissolve
operation was many times faster than QGIS or GRASS. Let's add a
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-dissolve&lt;/span&gt;&lt;/tt&gt; command and merge all census tracts for a county. We can
also sum up the values of the &lt;tt class="docutils literal"&gt;D001&lt;/tt&gt; field to get the total population of
the county from the sum of individual census tracts.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mapshaper -i tl_2013_06_tract\tl_2013_06_tract.shp -simplify 20% keep-shapes -join ca_tracts_pop.csv keys=GEOID,GEO.id2 field-types GEO.id2:str,D001:num -dissolve COUNTYFP sum-fields D001 -o output.shp
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/mapshaper5.png" /&gt;
&lt;ol class="arabic simple" start="4"&gt;
&lt;li&gt;The output format needed by many web apps is geojson or topojson. Mapshaper
can write the output in these formats as well. Let's add a
&lt;tt class="docutils literal"&gt;format=geojson&lt;/tt&gt; option to the &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-o&lt;/span&gt;&lt;/tt&gt; command to write a geojson output.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mapshaper -i tl_2013_06_tract\tl_2013_06_tract.shp -simplify 20% keep-shapes -join ca_tracts_pop.csv keys=GEOID,GEO.id2 field-types GEO.id2:str,D001:num -dissolve COUNTYFP sum-fields D001 -o format=geojson output.geojson
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/mapshaper6.png" /&gt;
&lt;ol class="arabic simple" start="5"&gt;
&lt;li&gt;Finally, let's visualize our output. Go to &lt;a class="reference external" href="http://geojson.io"&gt;geojson.io&lt;/a&gt;
and upload the resulting &lt;tt class="docutils literal"&gt;output.geojson&lt;/tt&gt;. You will be able to visualize
the output shapes and their properties.&lt;/li&gt;
&lt;/ol&gt;
&lt;img alt="" class="align-center" src="/images/mapshaper7.png" /&gt;
&lt;p&gt;By now, you must have figured out that we have a very powerful tool on our
hands. In just a single line of command and just a few seconds of computing, we
did Simplification, Table Join, Dissolve and Format translation.&lt;/p&gt;
&lt;/div&gt;
</summary></entry><entry><title>Spatial Joins on the Command Line</title><link href="http://www.spatialthoughts.com/blog/gis/ogr-spatial-join/" rel="alternate"></link><updated>2015-07-19T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2015-07-19:blog/gis/ogr-spatial-join/</id><summary type="html">&lt;p&gt;GDAL and OGR libraries come with handy &lt;a class="reference external" href="http://www.gdal.org/ogr_utilities.html"&gt;command-line tools&lt;/a&gt;. These tools are quite powerful and
can save you a lot of effort if you know how to use them. Here I will show how
to use the &lt;a class="reference external" href="http://www.gdal.org/ogrinfo.html"&gt;ogrinfo&lt;/a&gt; and &lt;a class="reference external" href="http://www.gdal.org/ogr2ogr.html"&gt;ogr2ogr&lt;/a&gt; tools to perform spatial joins. A single
command can do complex operations on your spatial data and save you a lot of
clicking-around and data-munging in a GIS.&lt;/p&gt;
&lt;div class="section" id="get-the-tools"&gt;
&lt;h2&gt;Get the Tools&lt;/h2&gt;
&lt;p&gt;The best way to get the command-line tools on Windows is via the &lt;a class="reference external" href="http://trac.osgeo.org/osgeo4w/"&gt;OSGeo4W
Installer&lt;/a&gt;. If you are on Linux or Mac, see
&lt;a class="reference external" href="https://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries"&gt;these instructions&lt;/a&gt; to get the package
for your platform.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="get-the-data"&gt;
&lt;h2&gt;Get the Data&lt;/h2&gt;
&lt;p&gt;Review the data and problem statement from the &lt;a class="reference external" href="http://www.qgistutorials.com/en/docs/performing_spatial_joins.html"&gt;Performing Spatial Joins&lt;/a&gt;
tutorial. Download the Borough Boundaries and Nursing Homes shapefiles.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="procedure"&gt;
&lt;h2&gt;Procedure&lt;/h2&gt;
&lt;p&gt;OGR command line tools accept only 1 input. But we have 2 inputs for the
spatial join. An easy way to fix this, is to use a &lt;a class="reference external" href="http://www.gdal.org/drv_vrt.html"&gt;VRT file&lt;/a&gt;. A VRT file allows us to specify multiple
inputs and pass them to the command-line tool as layers of a single input.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Unzip the input shapefiles in a single folder on your drive. Create a file
named &lt;tt class="docutils literal"&gt;input.vrt&lt;/tt&gt; in the same folder with the following content.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;lt;OGRVRTDataSource&amp;gt;
    &amp;lt;OGRVRTLayer name=&amp;quot;boroughs&amp;quot;&amp;gt;
        &amp;lt;SrcDataSource&amp;gt;nybb.shp&amp;lt;/SrcDataSource&amp;gt;
        &amp;lt;SrcLayer&amp;gt;nybb&amp;lt;/SrcLayer&amp;gt;
    &amp;lt;/OGRVRTLayer&amp;gt;
    &amp;lt;OGRVRTLayer name=&amp;quot;nursinghomes&amp;quot;&amp;gt;
        &amp;lt;SrcDataSource&amp;gt;OEM_NursingHomes_001.shp&amp;lt;/SrcDataSource&amp;gt;
        &amp;lt;SrcLayer&amp;gt;OEM_NursingHomes_001&amp;lt;/SrcLayer&amp;gt;
    &amp;lt;/OGRVRTLayer&amp;gt;
&amp;lt;/OGRVRTDataSource&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ol class="arabic simple" start="2"&gt;
&lt;li&gt;Open the OSGeo4W shell and &lt;tt class="docutils literal"&gt;cd&lt;/tt&gt; to the directory containing the shapefiles
and the vrt file. Run the &lt;tt class="docutils literal"&gt;ogrinfo&lt;/tt&gt; command to check if the VRT file is
correct.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ogrinfo input.vrt
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/ogr-spatial1.png" /&gt;
&lt;ol class="arabic simple" start="3"&gt;
&lt;li&gt;OGR tools can run SQL queries on the input layers. We will use the
&lt;tt class="docutils literal"&gt;ST_INTERSECTS&lt;/tt&gt; function to find all nursing homes that intersect the
boundary of a borough and use the &lt;tt class="docutils literal"&gt;SUM&lt;/tt&gt; function to find the total nursing
home capacity of a borough. Run the following command.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ogrinfo -sql &amp;quot;SELECT b.BoroName, sum(n.Capacity) as total_capacity from
boroughs b, nursinghomes n WHERE ST_INTERSECTS(b.geometry, n.geometry) group
by b.BoroName&amp;quot; -dialect SQLITE input.vrt
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/ogr-spatial2.png" /&gt;
&lt;ol class="arabic simple" start="4"&gt;
&lt;li&gt;You can see that in a single command we got the results by doing a spatial
join that takes a lot of clicking around in a GIS environment. We can do a
reverse spatial join as well. We can join the name of the Borough to each
feature of the Nursing Homes layer. Using the &lt;tt class="docutils literal"&gt;ogr2ogr&lt;/tt&gt; tool we can write
out a shapefile from the resulting join. Note that we are adding a
&lt;tt class="docutils literal"&gt;geometry&lt;/tt&gt; column in the SELECT statement which results in a spatial
output. Run the following command:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ogr2ogr -sql &amp;quot;SELECT n.Name, n.Capacity, n.geometry, b.BoroName from
boroughs b, nursinghomes n WHERE ST_INTERSECTS(b.geometry, n.geometry)&amp;quot;
-dialect SQLITE output.shp input.vrt
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/ogr-spatial3.png" /&gt;
&lt;ol class="arabic simple" start="5"&gt;
&lt;li&gt;Open the &lt;tt class="docutils literal"&gt;output.shp&lt;/tt&gt; in a GIS to verify that the new shapefile as
attributes joined from the intersecting borough. You can use &lt;tt class="docutils literal"&gt;ogrinfo&lt;/tt&gt;
command to check that as well.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ogrinfo -al output.shp
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="" class="align-center" src="/images/ogr-spatial4.png" /&gt;
&lt;/div&gt;
</summary></entry><entry><title>Implementing a Field Data collection app for APD</title><link href="http://www.spatialthoughts.com/blog/odk/opendatakit-for-apd/" rel="alternate"></link><updated>2015-04-29T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2015-04-29:blog/odk/opendatakit-for-apd/</id><summary type="html">&lt;p&gt;The &lt;a class="reference external" href="http://www.apd-india.org/"&gt;Association for People with Disability (APD)&lt;/a&gt;
is a non-profit organization based out of Bangalore, India. Their mission is to
reach out and rehabilitate people with disability from the under privileged
segment. Over the past year, I along with my colleagues have been volunteering
with them to develop a system that can help improve their field data collection
efforts.&lt;/p&gt;
&lt;div class="section" id="problem"&gt;
&lt;h2&gt;Problem&lt;/h2&gt;
&lt;p&gt;APD provides variety of services rehabilitate under privileged people with
disabilities. Before they can render any service, they need register the
individuals with the organization and collect basic background information.
Registrations are mostly done in their field offices or at camps organized in
rural areas. Paper forms were filled at the site and shipped to their field
office. A staff member entered the data manually into their software platform.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="a registration camp" src="/images/apd1.jpg" /&gt;
&lt;p class="caption"&gt;A registration camp.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;This has many problems:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;The text on the paper form was often illegible. Some fields were missing or
inaccurate.&lt;/li&gt;
&lt;li&gt;Data entry was laborious and introduced errors.&lt;/li&gt;
&lt;li&gt;4–6 weeks of lag time before the data was available in the system.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="our-solution"&gt;
&lt;h2&gt;Our solution&lt;/h2&gt;
&lt;p&gt;We helped APD implement a process using &lt;a class="reference external" href="https://opendatakit.org/"&gt;OpenDataKit (ODK)&lt;/a&gt; that allowed capture of the form using android
devices. With the new system, the data is captured on the mobile device using
the &lt;a class="reference external" href="https://play.google.com/store/apps/details?id=org.odk.collect.android&amp;amp;hl=en"&gt;ODK Collect&lt;/a&gt;
app in the field and sent to a &lt;a class="reference external" href="https://opendatakit.org/use/aggregate/"&gt;ODK Aggregate&lt;/a&gt; server running on Google AppEngine.
The data ends up in a shared spreadsheet which is imported to APD’s system
after each registration camp.&lt;/p&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="APD staff using the ODK collect mobile app" src="/images/apd2.png" /&gt;
&lt;p class="caption"&gt;APD staff using the ODK collect mobile app&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;This new workflow offers several advantages over the paper based forms:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Reliable data collection in areas with poor network connectivity. ODK Collect
app can work completely offline and the data is stored on the device memory.
Once the staff members are back in office and connect to a WiFi network --
the data is sent to the server.&lt;/li&gt;
&lt;li&gt;The mobile app enforces checks, so all the data is consistent and there are
no missing fields.&lt;/li&gt;
&lt;li&gt;Allows for the capture of pictures and additional metadata (such as time,
location, staff id).&lt;/li&gt;
&lt;li&gt;The data is exported from the spreadsheet and imported to their system the
next day -- cutting the lag from weeks to hours.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="timeline"&gt;
&lt;h2&gt;Timeline&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;October 2014: Met with the APD registration team to understand their
requirements and design a process.&lt;/li&gt;
&lt;li&gt;November 2014: A prototype is created by migrating the registration form to
ODK using XLSForm. APD trains field staff on using the mobile app. Successful
field test.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="First field test" src="/images/apd3.jpg" /&gt;
&lt;p class="caption"&gt;First field test of the app with newly trained staff&lt;/p&gt;
&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;December 2014: First full-fledged camp with 3 devices. Successful
registration of 55 participants. Staff is very happy with the increased
speed, accuracy and reduction in delay in getting the registrations
processed.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="First real deployment." src="/images/apd4.jpg" /&gt;
&lt;p class="caption"&gt;First ‘real’ deployment.Staff had paper forms as backup, but did not need it&lt;/p&gt;
&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;January 2014: APD moves their registrations completely to mobile devices. All
registrations are completely paperless and have the added benefit of having
participant’s picture as part of the registration process. Over 500
registrations processed without a problem.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="figure align-center"&gt;
&lt;img alt="paperless registration camp" src="/images/apd5.jpg" /&gt;
&lt;p class="caption"&gt;Completely paperless registration camp after migration to the mobile app&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;While this is a great start, we are looking at helping them with other
challenges in the field. In the coming months, we want to tackle the following
problems:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Migrate patient visit and treatment forms to OpenDataKit. These require
having access to the patient’s medical history in the field. OpenDataKit’s
2.0 suite of tools would be a good fit.&lt;/li&gt;
&lt;li&gt;Task allocation and scheduling optimization for the field staff.&lt;/li&gt;
&lt;li&gt;Encoding the knowledge from the training manual to a mobile app.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary></entry><entry><title>Le Paper Globe</title><link href="http://www.spatialthoughts.com/blog/misc/le-paper-globe/" rel="alternate"></link><updated>2013-07-14T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2013-07-14:blog/misc/le-paper-globe/</id><summary type="html">&lt;p&gt;A long pending weekend project is done. Printed, cut and folded a sturdy globe
using the template from &lt;a class="reference external" href="http://joachimesque.com/globe/"&gt;Le Paper Globe&lt;/a&gt;.&lt;/p&gt;
&lt;img alt="Completed globe." src="/images/le-paper-globe1.jpg" /&gt;
&lt;p&gt;This is not only fun, but a good prop to learn more about Geography. I envision
it would make a fun do-it-yourself project with kids of all ages.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;img alt="more pictures" src="/images/le-paper-globe2.jpg" /&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;img alt="more pictures" src="/images/le-paper-globe3.jpg" /&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;img alt="more pictures" src="/images/le-paper-globe4.jpg" /&gt;
</summary></entry><entry><title>Calculate distance between a pair of lat/lon coordinates</title><link href="http://www.spatialthoughts.com/blog/gis/calculate-distance-spreadsheet/" rel="alternate"></link><updated>2013-07-06T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2013-07-06:blog/gis/calculate-distance-spreadsheet/</id><summary type="html">&lt;p&gt;I recently had a need to calculate distance between a large number of
latitude/longitude coordinate pairs. There are many options available if you
want to import these in a GIS and run analysis. But there is a simpler and much
more accesible way if you aren't doing very high accuracy calculations.&lt;/p&gt;
&lt;p&gt;I decided to write a simple &lt;em&gt;Macro&lt;/em&gt; or &lt;em&gt;AppScript&lt;/em&gt; for Google Spreadsheets,
which uses the well-known &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Haversine_formula"&gt;Haversine formula&lt;/a&gt; to calculate distance
between 2 coordinates. Once the script is saved, the user of the spreadsheet
can use the function 'distance()' just the way one uses any of the built-in
functions.&lt;/p&gt;
&lt;img alt="forumla to calculate distance." src="/images/calculate-distance-spreadsheet.png" /&gt;
&lt;p&gt;You can give it a try. Just open &lt;a class="reference external" href="https://docs.google.com/spreadsheet/ccc?key=0AkXc7QoGul60dEc5Q01pTGNfa3N5YW5EWDNkOG9Ec3c&amp;amp;newcopy=true"&gt;this spreadsheet&lt;/a&gt;,
make a copy it and play with it as you like.&lt;/p&gt;
</summary></entry><entry><title>Notes from FOSS4G India - 2012</title><link href="http://www.spatialthoughts.com/blog/gis/foss4g-india-2012/" rel="alternate"></link><updated>2012-10-29T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2012-10-29:blog/gis/foss4g-india-2012/</id><summary type="html">&lt;p&gt;India’s first FOSS4G - India conference was organized on 25-26 October, 2012 at
Hyderabad. This was a surprisingly low-profile event and there was very little
buzz about it on the internet. I learnt about it just in time to register and
make it to the event. Here I am sharing some notes and impressions. (notes are
mostly from memory, so please excuse if I missed something)&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;I haven’t been  to other FOSS4G events, but this was unlike any other Geo
conference I have attended.  It was very formal and  government-centric. All
presentations were from government researchers, employees or students.&lt;/li&gt;
&lt;li&gt;The penetration of open-source software within government was deeper than I
anticipated and the decision-makers - including the politicians recognize the
benefits of using open technologies. The Chief Guest - Shri V. Aruna Kumar,
MP from Rajahmundry district commented that he realizes that the real cost of
software is not the upfront cost, but the lifetime maintenance cost and
open-source and open-standards can really benefit in the longer run.&lt;/li&gt;
&lt;li&gt;Keynote’s main message was that we should really focus on delivering
applications that solve real problems. According to the speaker - Shri Anoop
Singh, Special Secretary to AP Government - we have not even begun to realize
the full potential of GIS within governments. For most end-users and decision
makers, the ‘Science’ or 'System' in GIS isn’t important and GIS should
really be about Geographic Information Services.&lt;/li&gt;
&lt;li&gt;India is seen largely as a follower in the open source movement and no big
open-source projects have come out of research institutions here. To address
this, International Institute of Information Technology released one of their
projects - LSIViewer as open-source. The &lt;a class="reference external" href="https://github.com/LSI-IIIT/lsiviewer"&gt;github upload&lt;/a&gt; was done during the
inauguration of the conference by the chief guest!&lt;/li&gt;
&lt;li&gt;Prof. Venkatesh Raghavan receiving 2012 &lt;a class="reference external" href="http://www.osgeo.org/solkatz"&gt;Sol Katz award&lt;/a&gt; Prof. Venkatesh Raghavan, Osaka City
University was chosen as the winner of the 2012 Sol Katz ward by OsGeo. The
award was given to him during the conference.&lt;/li&gt;
&lt;li&gt;Postgrasql + PostGIS, Geoserver and Openlayers seem to be the platform of
choice. Almost all applications I saw were built  using one of these.&lt;/li&gt;
&lt;li&gt;ELOGeo portal was shown an example of learning resources available for open
source geo tools.&lt;/li&gt;
&lt;li&gt;There is virtually no  open data for India given the strict geo data policy.
But even within the government departments - there is a lot of reluctance in
data sharing. Everyone talked about this problem of data being guarded very
closely and seldom shared. But some forward thinking departments, especially
in Tamil Nadu, have found a way around it by promoting Web Services. They
publish a WMS feed for the datasets. That way other departments can use the
data without really having any ownership of it. This seems to be working
well.&lt;/li&gt;
&lt;li&gt;Ms. Mahalakshmi from National Informatics Center (NIC) in Tamil Nadu
demonstrated some of most interesting internal applications built by them.
They have built web services for different departments and each department
uses these web services for their application. Administrative boundaries,
census data, land use maps, land parcels, police data and planning related
data are some examples which are available via WMS. She also showed a pretty
cool app that BSNL - Chennai uses to identify fault points in their 2G
network. The map is updated in real-time with pings from their different 2G
sites around Chennai.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://bhuvan.nrsc.gov.in/bhuvan/"&gt;BHUVAN&lt;/a&gt; - Indian Space Research
Organization’s (ISRO) portal for disseminating geodata has come a long way
since it’s launch a few years back. It’s built completely using open-source
stack and it’s a pretty snappy app. For the first time, a lot of thematic
datasets are available freely to the public via WMS.  They are also making
some medium and low resolution raw/derived data from Indian remote sensing
satellites available for download. The downloads are for personal use only,
but this is a big step forward in India’s data access policy which has been
very restrictive so far.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In summary, some positives and challenges for Open-source software described by
various speakers.&lt;/p&gt;
&lt;div class="section" id="why-open-source-is-very-attractive-to-governments"&gt;
&lt;h2&gt;Why open source is very attractive to governments&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;No upfront cost. Don’t have to navigate complicated and time-consuming
approval and procurement process. Easy to get started at low-cost and do a
proof-of-concept.&lt;/li&gt;
&lt;li&gt;Standards Compliant. Rising awareness within the government of being
standards compliant. Choosing a proprietary solution which is not standards
compliant can cause problems and raise questions from others in future.&lt;/li&gt;
&lt;li&gt;No vendor lock-in. Can hire another consultant to run or develop services
since all code is available.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="challenges-to-wider-open-source-adoption"&gt;
&lt;h2&gt;Challenges to wider open source adoption&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Lack of support. Not many companies providing development and support. Most
applications shown were written and maintained by in-house staff. Big
opportunities for consultants who can provide support for open source tools.&lt;/li&gt;
&lt;li&gt;Change aversion: On the desktop, most people are used to proprietary software
from their education or prior work. One example given was reluctance in the
government to switch to Open Office. Free versions of MS Office is easy to
come by and no incentive to learn and adopt open source solution. Using
open-source software in education is a way to increase the adoption.&lt;/li&gt;
&lt;li&gt;Lack  of Mature solutions: Politicians and administrators felt they had
limited time in their tenure to implement whatever changes they want and show
progress.  There is always the attraction to choose a well known solution and
get the results. The key message was that they feel the open-source software
is mature but there are no mature solutions based on these that the
governments can adopt without much risk.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary></entry><entry><title>Notes from Carotonama - 2012</title><link href="http://www.spatialthoughts.com/blog/gis/cartonama-2012/" rel="alternate"></link><updated>2012-10-28T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2012-10-28:blog/gis/cartonama-2012/</id><summary type="html">&lt;p&gt;I was at #cartonama conference in Bangalore on 23rd September. It was wonderful
to be among geogeeks and see the energy and enthusiasm. Got to see some great
demos and LBS apps from startups in India. Here's a run down from my notes and
bookmarks.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Traffic cams in Bangalore: This was probably the coolest demo for me. Love
the simplicity and usefulness. Just open this URL in your smartphone browser
and get real-time feed from the traffic-cam neareast to you from BTIS.
&lt;a class="reference external" href="http://hackday.freecrow.org/trafficam"&gt;http://hackday.freecrow.org/trafficam&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Thru the Gall: A Layar-based android app to solve the last-mile direcction
problem in India. Bubbles guide you through the narrow-lanes (galli).
&lt;a class="reference external" href="http://www.layar.com/layers/galli/"&gt;http://www.layar.com/layers/galli/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Padma: Search and Browse Indian documentaries through locations of the clips
in the documentaries &lt;a class="reference external" href="http://pad.ma/map"&gt;http://pad.ma/map&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;DelightCircle: LBS app to discover offers and discounts near you. Surprised
at the coverage and partnerships they are able to genrate in the short time.
Powered by MongoDB at the backend.http://delightcircle.com/&lt;/li&gt;
&lt;li&gt;Commonfloor.com: Google Maps API app for property search. Nicely done and
simple UI and fast lad times. The team talked about challenges and techniques
they use to de-dup the listings and pin the individual listings to the
apartment block. &lt;a class="reference external" href="http://www.commonfloor.com/apartments-for-sale/maps/"&gt;http://www.commonfloor.com/apartments-for-sale/maps/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Yahoo: I had forgotten about yahoo as a geo player. But from the talk the
team seems pretty excited about their geo APIs. The Geo APIs are used by many
yahoo properties internally and available to developers too. The API to
extract locations from free-form-text was cool. YQL is a SQL-like query
interface for their API. &lt;a class="reference external" href="http://developer.yahoo.com/yql/console/"&gt;http://developer.yahoo.com/yql/console/&lt;/a&gt;,  APIS at
&lt;a class="reference external" href="http://developer.yahoo.com/geo/"&gt;http://developer.yahoo.com/geo/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;NextDrop: Very interesting idea. Most places in India do not have a regular
water supply and people's day revolves around when they are able to collecct
water. They have built a system that alerts subscribers by sms when they can
expect water based on the information from the utility company. Subscribers
pay Rs.10/month to get this data. Their challenge revoled around locating
their customers on a map - both for billing as well as determining which
pipeline will supply them water. &lt;a class="reference external" href="http://nextdrop.org"&gt;http://nextdrop.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Lokasi: Simple android app that allows you to share your current location by
sms. Reverse-geocoding + location identifier. &lt;a class="reference external" href="http://www.onze.in/"&gt;http://www.onze.in/&lt;/a&gt;  .
collected POIs + street geometry for entire bangalore is about 6 months with
a 10-person team.&lt;/li&gt;
&lt;li&gt;Brief history of map making: Fun talk with lot of pretty and interesting
maps.  No geo conference is complete without a passionate discussion on
projections :)
&lt;a class="reference external" href="http://www.slideshare.net/sumandro/sumandromapping-thecity27032012-12203410"&gt;http://www.slideshare.net/sumandro/sumandromapping-thecity27032012-12203410&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Chalo BEST: Bus route planner for Mumbai using OpenTripPlanner and GTFS feed
from BEST. &lt;a class="reference external" href="http://trip.chalobest.in/"&gt;http://trip.chalobest.in/&lt;/a&gt; . Challenges in converting messy
spreadsheet data from the agengy in to GTFS feed.&lt;/li&gt;
&lt;li&gt;Geohash: overview of the geohash system. Lots of discussion around what
geohash is good for. &lt;a class="reference external" href="http://geohash.org/"&gt;http://geohash.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</summary></entry><entry><title>GIS Project Ideas for Thesis/ Dissertation/ Internship</title><link href="http://www.spatialthoughts.com/blog/gis/gis-project-ideas/" rel="alternate"></link><updated>2010-10-25T00:00:00+05:30</updated><author><name>Ujaval Gandhi</name></author><id>tag:www.spatialthoughts.com,2010-10-25:blog/gis/gis-project-ideas/</id><summary type="html">&lt;p&gt;Many students have asked me for ideas on what topic they should choose for
their Thesis. I have debated this myself when I was a student. The ideal topic
would be the one that allows you to dive into a topic deeply as well as give
you some practical skills that will help you landing a job. Here are some
pointer that may help you make that decision.&lt;/p&gt;
&lt;div class="section" id="create-a-mashup"&gt;
&lt;h2&gt;Create a Mashup&lt;/h2&gt;
&lt;p&gt;A mashup is created by merging 2 or more sources of location data. There are
variety of free data available for you to experiment with and create unique
applications. Map mashups can be created using free tools such as Google Maps,
OpenLayers, GeoCommons Maker!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="develop-a-plug-in-for-an-open-source-gis"&gt;
&lt;h2&gt;Develop a plug-in for an open-source GIS&lt;/h2&gt;
&lt;p&gt;There is always a need to implement new features for open-source GIS software
like QGIS or MapWindowGIS. You can implement a cool feature or customize the
software for a particular domain. You will not only gain valuable experience
developing among the best programmers but also this will be an impressive
addition to your resume.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="work-with-an-ngo"&gt;
&lt;h2&gt;Work with an NGO&lt;/h2&gt;
&lt;p&gt;Most often students struggle to find good quality free GIS data which can be
used in interesting ways. Contact local NGOs to see if you can help them
analyze their location-specific data. Most NGOs collect some form of loation
data and your GIS skills can come in handy to them. The result of such a
project could be a unique GIS project that uses real on-the-ground data.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="build-a-campus-gis"&gt;
&lt;h2&gt;Build a Campus GIS&lt;/h2&gt;
&lt;p&gt;If you are at a university, a good project would be to put together a
web-accessible campus information system. You could model the campus buildings
in 3D, use satellite imagery via an API and overlay data about your campus.
Such a system could be attractive to the administrator as well.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="develop-a-vehicle-tracking-system"&gt;
&lt;h2&gt;Develop a vehicle tracking system&lt;/h2&gt;
&lt;p&gt;You can buy a cheap GPS receiver and implement a vehicle tracking system. This
will get you exposed to GPS/GSM protocols and get you hands-on knowledge that
many companies worldwide are looking for. Add your own twist to the traditional
tracking system by specializing it for walking directions, bus travel, toursut
sightseeing, navigating the blind etc.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="do-some-green-research"&gt;
&lt;h2&gt;Do some 'Green' research&lt;/h2&gt;
&lt;p&gt;Everyone is turning to green and sustainable technologies. As an intern or a
researcher, you could use your analytical skills to further the knowledge in
this area. Wind power, solar energy, climate change etc. are great topics for
GIS and Remote Sensing research.Analysing wind data to find best locations for
wind turbines or using remote sensing images to detect climate change are some
examples of projects. If you are a PhD student, you'll find these topics
complex and challenging enough for yor dissertation and you'll stand to recieve
grants or funds from governments as well.&lt;/p&gt;
&lt;p&gt;Do you have more ideas to share? What project are you thinking of? Please leave
a comment and help the GIS student community!&lt;/p&gt;
&lt;/div&gt;
</summary></entry></feed>